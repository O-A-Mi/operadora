# StepperPadrao

Componente de stepper reutilizÃ¡vel para navegaÃ§Ã£o entre etapas em formulÃ¡rios multi-step com suporte a condiÃ§Ãµes dinÃ¢micas.

## Propriedades

| Propriedade | Tipo | PadrÃ£o | DescriÃ§Ã£o |
|-------------|------|--------|-----------|
| `steps` | Array | `[]` | Array de objetos com as etapas do stepper |
| `currentStep` | Number | `0` | ID da etapa atual |
| `onStepChange` | Function | `undefined` | FunÃ§Ã£o chamada quando uma etapa Ã© clicada |
| `showStepper` | Boolean | `true` | Controla se o stepper deve ser exibido |
| `stepConditions` | Object | `{}` | Objeto com condiÃ§Ãµes para cada etapa (`'disabled'` ou `'invisible'`) |
| `children` | ReactNode | - | ConteÃºdo das etapas |

## Estrutura do Array `steps`

Cada objeto no array `steps` deve ter a seguinte estrutura:

```javascript
{
  id: 0,                    // ID Ãºnico da etapa (nÃ£o precisa ser sequencial)
  name: 'Nome da Etapa',    // Nome exibido no tooltip
  icon: 'fa-solid fa-icon', // Classe do Ã­cone FontAwesome
  color: '#3b82f6'         // Cor do Ã­cone quando ativo
}
```

## Estados das Etapas (`stepConditions`)

O objeto `stepConditions` permite definir diferentes estados para as etapas:

```javascript
const stepConditions = {
  1: 'disabled',   // Etapa visÃ­vel mas nÃ£o clicÃ¡vel (aparece com indicador visual)
  2: 'invisible',  // Etapa completamente oculta (nÃ£o aparece no stepper)
  4: 'disabled'    // Outra etapa desabilitada
}
```

### Estados DisponÃ­veis:
- **Normal** (sem condiÃ§Ã£o): Etapa visÃ­vel e clicÃ¡vel
- **`'disabled'`**: Etapa visÃ­vel com opacidade reduzida e linha diagonal, nÃ£o clicÃ¡vel
- **`'invisible'`**: Etapa nÃ£o aparece no stepper

## Exemplo de Uso BÃ¡sico

```jsx
import React, { useState } from 'react';
import StepperPadrao from '@/components/StepperPadrao';

const MinhaTela = () => {
  const [currentStep, setCurrentStep] = useState(0);
  
  const steps = [
    { id: 0, name: 'Dados BÃ¡sicos', icon: 'fa-solid fa-user', color: '#3b82f6' },
    { id: 1, name: 'ConfiguraÃ§Ãµes', icon: 'fa-solid fa-cog', color: '#10b981' },
    { id: 2, name: 'RevisÃ£o', icon: 'fa-solid fa-check', color: '#8b5cf6' }
  ];

  const handleStepChange = (stepId) => {
    setCurrentStep(stepId);
  };

  return (
    <div>
      <h1>Meu FormulÃ¡rio</h1>
      
      <StepperPadrao
        steps={steps}
        currentStep={currentStep}
        onStepChange={handleStepChange}
      >
        {currentStep === 0 && (
          <div>
            <h2>Dados BÃ¡sicos</h2>
            {/* ConteÃºdo da primeira etapa */}
          </div>
        )}
        
        {currentStep === 1 && (
          <div>
            <h2>ConfiguraÃ§Ãµes</h2>
            {/* ConteÃºdo da segunda etapa */}
          </div>
        )}
        
        {currentStep === 2 && (
          <div>
            <h2>RevisÃ£o</h2>
            {/* ConteÃºdo da terceira etapa */}
          </div>
        )}
      </StepperPadrao>
    </div>
  );
};
```

## Exemplo com CondiÃ§Ãµes DinÃ¢micas

```jsx
import React, { useState } from 'react';
import StepperPadrao from '@/components/StepperPadrao';

const FormularioCondicional = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [utilizaFaixaIdade, setUtilizaFaixaIdade] = useState(false);
  const [adicionaDependentes, setAdicionaDependentes] = useState(true);
  const [cobraDependentes, setCobraDependentes] = useState(false);
  const [utilizaVigencia, setUtilizaVigencia] = useState(false);
  
  const steps = [
    { id: 0, name: 'Plano', icon: 'fa-solid fa-clipboard-list', color: '#3b82f6' },
    { id: 1, name: 'Faixa do Titular', icon: 'fa-solid fa-user', color: '#10b981' },
    { id: 2, name: 'Faixa do Dependente', icon: 'fa-solid fa-child', color: '#8b5cf6' },
    { id: 3, name: 'Produto/ServiÃ§o', icon: 'fa-solid fa-wrench', color: '#ef4444' },
    { id: 4, name: 'VigÃªncia/Limite', icon: 'fa-solid fa-calendar', color: '#f59e0b' },
    { id: 5, name: 'Comissionamento', icon: 'fa-solid fa-dollar-sign', color: '#10b981' }
  ];

  // Definir condiÃ§Ãµes baseadas no estado da aplicaÃ§Ã£o
  const getStepConditions = () => {
    const conditions = {};

    // Step 1: Faixa Titular - invisible se nÃ£o utiliza faixa de idade
    if (!utilizaFaixaIdade) {
      conditions[1] = 'invisible';
    }

    // Step 2: Faixa Dependente - invisible se nÃ£o adiciona OU nÃ£o cobra dependentes
    if (!adicionaDependentes || !cobraDependentes) {
      conditions[2] = 'invisible';
    }

    // Step 4: VigÃªncia - disabled se nÃ£o utiliza vigÃªncia (visÃ­vel mas nÃ£o clicÃ¡vel)
    if (!utilizaVigencia) {
      conditions[4] = 'disabled';
    }

    return conditions;
  };

  const handleStepChange = (stepId) => {
    setCurrentStep(stepId);
  };

  const handleToggleChange = (toggleName, value) => {
    switch (toggleName) {
      case 'utilizaFaixaIdade':
        setUtilizaFaixaIdade(value);
        // Se desabilitar faixa de idade e estiver no step 1, voltar para step 0
        if (!value && currentStep === 1) {
          setCurrentStep(0);
        }
        break;
      case 'adicionaDependentes':
        setAdicionaDependentes(value);
        // Se desabilitar dependentes e estiver no step 2, ir para step 3
        if (!value && currentStep === 2) {
          setCurrentStep(3);
        }
        break;
      case 'cobraDependentes':
        setCobraDependentes(value);
        // Se desabilitar cobranÃ§a de dependentes e estiver no step 2, ir para step 3
        if (!value && currentStep === 2) {
          setCurrentStep(3);
        }
        break;
      case 'utilizaVigencia':
        setUtilizaVigencia(value);
        break;
      default:
        break;
    }
  };

  return (
    <div>
      <h1>FormulÃ¡rio com CondiÃ§Ãµes</h1>
      
      <StepperPadrao
        steps={steps}
        currentStep={currentStep}
        onStepChange={handleStepChange}
        stepConditions={getStepConditions()}
      >
        {currentStep === 0 && (
          <div>
            <h2>ConfiguraÃ§Ã£o do Plano</h2>
            
            {/* Toggles que controlam as condiÃ§Ãµes */}
            <div style={{ display: 'flex', flexDirection: 'column', gap: '1rem' }}>
              <label>
                <input
                  type="checkbox"
                  checked={utilizaFaixaIdade}
                  onChange={(e) => handleToggleChange('utilizaFaixaIdade', e.target.checked)}
                />
                Utiliza Faixa de Idade (mostra/oculta Step 1)
              </label>
              
              <label>
                <input
                  type="checkbox"
                  checked={adicionaDependentes}
                  onChange={(e) => handleToggleChange('adicionaDependentes', e.target.checked)}
                />
                Adiciona Dependentes
              </label>
              
              <label>
                <input
                  type="checkbox"
                  checked={cobraDependentes}
                  onChange={(e) => handleToggleChange('cobraDependentes', e.target.checked)}
                />
                Cobra Dependentes (mostra/oculta Step 2)
              </label>
              
              <label>
                <input
                  type="checkbox"
                  checked={utilizaVigencia}
                  onChange={(e) => handleToggleChange('utilizaVigencia', e.target.checked)}
                />
                Utiliza VigÃªncia (habilita/desabilita Step 4)
              </label>
            </div>
          </div>
        )}
        
        {currentStep === 1 && (
          <div>
            <h2>Faixa do Titular por Idade</h2>
            <p>Esta etapa sÃ³ aparece se "Utiliza Faixa de Idade" estiver marcado.</p>
          </div>
        )}
        
        {currentStep === 2 && (
          <div>
            <h2>Faixa do Dependente por Idade</h2>
            <p>Esta etapa sÃ³ aparece se "Adiciona Dependentes" E "Cobra Dependentes" estiverem marcados.</p>
          </div>
        )}
        
        {currentStep === 3 && (
          <div>
            <h2>Produto/ServiÃ§o</h2>
            <p>Esta etapa sempre aparece.</p>
          </div>
        )}
        
        {currentStep === 4 && (
          <div>
            <h2>VigÃªncia/Limite de TransmissÃ£o</h2>
            <p>Esta etapa fica desabilitada se "Utiliza VigÃªncia" nÃ£o estiver marcado.</p>
          </div>
        )}
        
        {currentStep === 5 && (
          <div>
            <h2>Comissionamento</h2>
            <p>Esta etapa sempre aparece.</p>
          </div>
        )}
      </StepperPadrao>
    </div>
  );
};
```

## Exemplo com NavegaÃ§Ã£o ProgramÃ¡tica

```jsx
import React, { useState } from 'react';
import StepperPadrao from '@/components/StepperPadrao';

const FormularioCompleto = () => {
  const [currentStep, setCurrentStep] = useState(0);
  const [stepConditions, setStepConditions] = useState({});
  
  const steps = [
    { id: 0, name: 'Plano', icon: 'fa-solid fa-clipboard-list', color: '#3b82f6' },
    { id: 1, name: 'Faixa Titular', icon: 'fa-solid fa-user', color: '#10b981' },
    { id: 2, name: 'Faixa Dependente', icon: 'fa-solid fa-users', color: '#8b5cf6' },
    { id: 3, name: 'Produto/ServiÃ§o', icon: 'fa-solid fa-wrench', color: '#ef4444' }
  ];

  const handleStepChange = (stepId) => {
    setCurrentStep(stepId);
  };

  // FunÃ§Ã£o para encontrar o prÃ³ximo step vÃ¡lido (nÃ£o invisible)
  const getNextValidStep = () => {
    const visibleSteps = steps.filter(step => stepConditions[step.id] !== 'invisible');
    const currentIndex = visibleSteps.findIndex(step => step.id === currentStep);
    return currentIndex < visibleSteps.length - 1 ? visibleSteps[currentIndex + 1].id : null;
  };

  // FunÃ§Ã£o para encontrar o step anterior vÃ¡lido (nÃ£o invisible)
  const getPreviousValidStep = () => {
    const visibleSteps = steps.filter(step => stepConditions[step.id] !== 'invisible');
    const currentIndex = visibleSteps.findIndex(step => step.id === currentStep);
    return currentIndex > 0 ? visibleSteps[currentIndex - 1].id : null;
  };

  const handleAnterior = () => {
    const prevStep = getPreviousValidStep();
    if (prevStep !== null) {
      setCurrentStep(prevStep);
    }
  };

  const handleProximo = () => {
    const nextStep = getNextValidStep();
    if (nextStep !== null) {
      setCurrentStep(nextStep);
    }
  };

  return (
    <div>
      <StepperPadrao
        steps={steps}
        currentStep={currentStep}
        onStepChange={handleStepChange}
        stepConditions={stepConditions}
      >
        {/* ConteÃºdo das etapas */}
        <div>
          {currentStep === 0 && <div>ConteÃºdo do Plano</div>}
          {currentStep === 1 && <div>ConteÃºdo da Faixa Titular</div>}
          {currentStep === 2 && <div>ConteÃºdo da Faixa Dependente</div>}
          {currentStep === 3 && <div>ConteÃºdo do Produto/ServiÃ§o</div>}
        </div>
      </StepperPadrao>

      {/* BotÃµes de navegaÃ§Ã£o */}
      <div style={{ display: 'flex', gap: '1rem', justifyContent: 'center', marginTop: '2rem' }}>
        <button 
          onClick={handleAnterior} 
          disabled={getPreviousValidStep() === null}
        >
          Anterior
        </button>
        <button 
          onClick={handleProximo} 
          disabled={getNextValidStep() === null}
        >
          PrÃ³ximo
        </button>
      </div>
    </div>
  );
};
```

## Exemplo Ocultando o Stepper

```jsx
import React, { useState } from 'react';
import StepperPadrao from '@/components/StepperPadrao';

const TelaCondicional = () => {
  const [showStepper, setShowStepper] = useState(true);
  const [currentStep, setCurrentStep] = useState(0);
  
  const steps = [
    { id: 0, name: 'Etapa 1', icon: 'fa-solid fa-star', color: '#3b82f6' },
    { id: 1, name: 'Etapa 2', icon: 'fa-solid fa-heart', color: '#ef4444' }
  ];

  return (
    <div>
      <button onClick={() => setShowStepper(!showStepper)}>
        {showStepper ? 'Ocultar' : 'Mostrar'} Stepper
      </button>
      
      <StepperPadrao
        steps={steps}
        currentStep={currentStep}
        onStepChange={setCurrentStep}
        showStepper={showStepper}
      >
        <div>ConteÃºdo da etapa {currentStep + 1}</div>
      </StepperPadrao>
    </div>
  );
};
```

## CaracterÃ­sticas

- **Responsivo**: Adapta-se automaticamente a diferentes tamanhos de tela
- **AcessÃ­vel**: Suporte a tooltips para melhor usabilidade
- **CustomizÃ¡vel**: Cores e Ã­cones personalizÃ¡veis por etapa
- **FlexÃ­vel**: Pode ser ocultado condicionalmente
- **Interativo**: Clique nas etapas para navegar diretamente
- **Mobile-friendly**: Dropdown para dispositivos mÃ³veis
- **NavegaÃ§Ã£o por ID**: Usa IDs de etapas em vez de Ã­ndices para maior flexibilidade
- **CondiÃ§Ãµes DinÃ¢micas**: Suporte a etapas condicionais (disabled/invisible)
- **NavegaÃ§Ã£o Inteligente**: Pula automaticamente etapas invisÃ­veis/desabilitadas
- **Indicadores Visuais**: Estados disabled com feedback visual claro

## Comportamento das CondiÃ§Ãµes

### Estados Visuais:
- **Normal**: Ãcone colorido, clicÃ¡vel, sem restriÃ§Ãµes
- **Disabled**: Ãcone acinzentado com linha diagonal, tooltip informativo, nÃ£o clicÃ¡vel
- **Invisible**: NÃ£o aparece no stepper

### NavegaÃ§Ã£o AutomÃ¡tica:
- BotÃµes anterior/prÃ³ximo pulam etapas invisÃ­veis automaticamente
- Clique em etapas desabilitadas nÃ£o executa `onStepChange`
- Tooltips mostram "(Desabilitado)" para etapas com estado disabled

## Comportamento Mobile

Em dispositivos mÃ³veis (365px - 767px), o stepper se comporta como um seletor com navegaÃ§Ã£o por setas e dropdown:

1. **Layout Centralizado**: Ãcone e tÃ­tulo da etapa atual no centro
2. **NavegaÃ§Ã£o por Setas**: BotÃµes de seta nas laterais para navegar (pulam etapas invisÃ­veis)
3. **Dropdown no Ãcone**: Clique no Ã­cone central para abrir lista de etapas visÃ­veis
4. **Estados Desabilitados**: Etapas disabled aparecem no dropdown mas nÃ£o sÃ£o clicÃ¡veis
5. **Feedback Visual**: Efeitos hover no Ã­cone central e setas
6. **Fechamento AutomÃ¡tico**: Dropdown fecha ao clicar fora do stepper

### Layout Mobile

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—€ [ğŸ”µ] Nome da Etapa Atual â–¶ â”‚ â† Seletor com navegaÃ§Ã£o
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ”µ] Etapa 1                   â”‚ â† Dropdown (apenas etapas visÃ­veis)
â”‚ [ğŸš«] Etapa 2 (Desabilitada)   â”‚ â† Etapa disabled
â”‚ [âšª] Etapa 3                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Media Queries

O componente utiliza as seguintes breakpoints:
- `@media (min-width: 365px) and (max-width: 767px)`: Layout dropdown para mobile
- `@media (min-width: 768px)`: Layout horizontal para tablet
- `@media (min-width: 1024px)`: Layout otimizado para desktop
- `@media (min-width: 1280px)`: Layout para telas grandes
- `@media (min-width: 1650px)`: Layout para telas muito grandes

## Classes CSS DisponÃ­veis

O componente inclui as seguintes classes CSS que podem ser usadas para customizaÃ§Ã£o:

### Classes Principais:
- `.stepperContainer`: Container principal do stepper
- `.stepperWrapper`: Wrapper do componente completo
- `.stepper`: Container dos passos (desktop)
- `.step`: Passo individual
- `.stepIcon`: Ãcone do passo
- `.activeStep`: Passo ativo
- `.stepLine`: Linha conectora entre passos
- `.stepperContent`: Container do conteÃºdo
- `.stepScreen`: Tela individual (para uso com activeScreen/hiddenScreen)
- `.activeScreen`: Tela ativa
- `.hiddenScreen`: Tela oculta

### Classes Mobile:
- `.mobileStepper`: Container mobile
- `.mobileStepSelector`: Seletor mobile
- `.mobileNavButton`: BotÃ£o de navegaÃ§Ã£o mobile
- `.mobileStepContent`: ConteÃºdo do passo mobile
- `.mobileStepIcon`: Ãcone do passo mobile
- `.mobileStepName`: Nome do passo mobile
- `.mobileDropdown`: Dropdown mobile
- `.mobileDropdownItem`: Item do dropdown mobile
- `.mobileDropdownIcon`: Ãcone do item dropdown mobile
- `.mobileDropdownLabel`: Label do item dropdown mobile